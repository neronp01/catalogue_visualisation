<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Starter Kit</title>

  <!-- Disable tap highlight on IE -->
  <meta name="msapplication-tap-highlight" content="no">

  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Web Starter Kit">
  <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
  <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

  <!-- Tile icon for Win8 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#2F3BA2">

  <!-- Color the status bar on mobile devices -->
  <meta name="theme-color" content="#2F3BA2">

  <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
  <!--
  <link rel="canonical" href="http://www.example.com/">
  -->

  <!-- Material Design icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">


  <!-- Material Design Lite page styles:
  You can choose other color schemes from the CDN, more info here http://www.getmdl.io/customize/index.html
  Format: material.color1-color2.min.css, some examples:
  material.red-teal.min.css
  material.blue-orange.min.css
  material.purple-indigo.min.css
  -->


  <!-- Your styles -->
  <link rel="stylesheet" href="styles/main.css">
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src=" https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://unpkg.com/topojson@2"></script>

</head>
<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">






<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
  <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
    <div class="mdl-layout--large-screen-only mdl-layout__header-row ">
    </div>
    <div class="mdl-layout--large-screen-only mdl-layout__header-row">
      <h3>Catalogue de visualisation</h3>
    </div>
    <div class="mdl-layout--large-screen-only mdl-layout__header-row">
    </div>
    <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
      <a href="#overview" class="mdl-layout__tab is-active">Aperçu</a>
      <a href="#features" class="mdl-layout__tab" id="feature">Catalogue</a>
      <a href="#edition" class="mdl-layout__tab" id="edition_button">Édition/modification</a>
      <a href="#features" class="mdl-layout__tab">Technologie</a>
      <a href="#features" class="mdl-layout__tab">FAQ</a>
    </div>
  </header>

  <script>

  </script>
  <main class="mdl-layout__content">
    <div class="mdl-layout__tab-panel is-active" id="overview">
      <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
        <header class="section__play-btn mdl-cell mdl-cell--3-col-desktop mdl-cell--2-col-tablet mdl-cell--4-col-phone mdl-color--teal-100 mdl-color-text--white">
          <i class="material-icons">play_circle_filled</i>
        </header>
        <div class="mdl-card mdl-cell mdl-cell--9-col-desktop mdl-cell--6-col-tablet mdl-cell--4-col-phone">
          <div class="mdl-card__supporting-text">
            <h4>Aperçu</h4>
            La technologie nous permet de ramasser et de traiter des grands ensembles de données. La visualisation nous permet d'afficher tous ces données à partire d'image vectolielles afin d'avoir une meilleur compréhention du sujet. Cette application nous est un catalogue de visualisation conçu pour trois groupe de Statistique Canada. Le premier groupe est les développeurs. Ainsi ceci pourrons avoir facilement accès à tous la doccumentation des visualisations afficher dans le catalogue afin de reproduire eficacement les visualistion. Le Deuxième groupe sont les personnes en production qui aurrons accès à tous les étapes à la mise en production des visualisations. Le dernier groupe est les clients. Tous les clients potentiel pourront consulter le catalogue de visualisation
          </div>
          <div class="mdl-card__actions">
            <a href="#" class="mdl-button">Read our features</a>
          </div>
        </div>
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="btn1">
          <i class="material-icons">more_vert</i>
        </button>
        <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for="btn1">
          <li class="mdl-menu__item">Lorem</li>
          <li class="mdl-menu__item" disabled>Ipsum</li>
          <li class="mdl-menu__item">Dolor</li>
        </ul>
      </section>
      <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
        <div class="mdl-card mdl-cell mdl-cell--12-col">
          <div class="mdl-card__supporting-text mdl-grid mdl-grid--no-spacing">
            <h4 class="mdl-cell mdl-cell--12-col">Travaux à complèter</h4>
            <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
              <div class="section__circle-container__circle mdl-color--primary"></div>
            </div>
            <div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
              <h5>ÉDITION/MODIFICATION</h5>
              Modifier le bouton selection doccumentation afin de sélectionner un cercle de façon dynamique <a id="changementEdition" href="#edition">ÉDITION/MODIFICTION</a>.
            </div>
            <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
              <div class="section__circle-container__circle mdl-color--primary"></div>
            </div>
            <div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
              <h5>INDEX.HTML</h5>
              Faire une revue de code et modifier celui-ci afin déliminer les éléments en double pour reduire la taille du fichier. Deplus, le code devra être bien doccumenter. <a href="#">index.html</a>.
            </div>
            <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
              <div class="section__circle-container__circle mdl-color--primary"></div>
            </div>
            <div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
              <h5>MODULE DE VISUALISATION</h5>
              Dévolopper un module afin de faciliter la mise en place de visualisation <a href="#">proident minim</a>.
            </div>
          </div>
          <div class="mdl-card__actions">
            <a href="#" class="mdl-button">Read our features</a>
          </div>
        </div>
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="btn2">
          <i class="material-icons">more_vert</i>
        </button>
        <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for="btn2">
          <li class="mdl-menu__item">Lorem</li>
          <li class="mdl-menu__item" disabled>Ipsum</li>
          <li class="mdl-menu__item">Dolor</li>
        </ul>
      </section>
      <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
        <div class="mdl-card mdl-cell mdl-cell--12-col">
          <div class="mdl-card__supporting-text">
            <h4>Technology</h4>
            Dolore ex deserunt aute fugiat aute nulla ea sunt aliqua nisi cupidatat eu. Nostrud in laboris labore nisi amet do dolor eu fugiat consectetur elit cillum esse. Pariatur occaecat nisi laboris tempor laboris eiusmod qui id Lorem esse commodo in. Exercitation aute dolore deserunt culpa consequat elit labore incididunt elit anim.
          </div>
          <div class="mdl-card__actions">
            <a href="#" class="mdl-button">Read our features</a>
          </div>
        </div>
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="btn3">
          <i class="material-icons">more_vert</i>
        </button>
        <ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for="btn3">
          <li class="mdl-menu__item">Lorem</li>
          <li class="mdl-menu__item" disabled>Ipsum</li>
          <li class="mdl-menu__item">Dolor</li>
        </ul>
      </section>
      <section class="section--footer mdl-color--white mdl-grid">
        <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
          <div class="section__circle-container__circle mdl-color--accent section__circle--big"></div>
        </div>
        <div class="section__text mdl-cell mdl-cell--4-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
          <h5>Lorem ipsum dolor sit amet</h5>
          Qui sint ut et qui nisi cupidatat. Reprehenderit nostrud proident officia exercitation anim et pariatur ex.
        </div>
        <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
          <div class="section__circle-container__circle mdl-color--accent section__circle--big"></div>
        </div>
        <div class="section__text mdl-cell mdl-cell--4-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
          <h5>Lorem ipsum dolor sit amet</h5>
          Qui sint ut et qui nisi cupidatat. Reprehenderit nostrud proident officia exercitation anim et pariatur ex.
        </div>
      </section>
    </div>
    <div class="mdl-layout__tab-panel" id="features">
      <section class=" mdl-grid mdl-grid--no-spacing">
        <!--<div class="mdl-cell mdl-cell&#45;&#45;12-col"></div>-->

        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp" id="sectionGauche">
          <div class="mdl-cell mdl-cell--12-col-desktop mdl-card__supporting-text" id="sectionGauche_catalogue">
            <svg id="coteDroitCercles">
            </svg>
          </div>
        </section>
        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp sectionDroite">
          <div class="mdl-cell mdl-cell--12-col-desktop mdl-card__supporting-text" id="coteDroite_edition">
            <div class="scroll">
              <div id="countainerDroit"></div>
            </div>
          </div>
        </section>
      </section>
    </div>

    <div class="mdl-layout__tab-panel"  id="edition">
      <section class="mdl-grid" >
        <section class="section--center mdl-grid mdl-shadow--2dp sectionGauche"  style="width: 800px ;height:800px">
          <div class="mdl-cell mdl-cell--12-col-desktop demo-section mdl-typography--display-1" >

            <nav class="mdc-permanent-drawer">
              <div class="mdc-permanent-drawer__toolbar-spacer"></div>
              <div class="mdc-list-group">
                <nav class="mdc-list">
                  <a class="mdc-list-item" id="menuTitre">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">title</i>Sous-titre
                  </a>
                  <a class="mdc-list-item" id="menuEdition">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">mode_edit</i>Édition
                  </a>
                  <a class="mdc-list-item" id="menuSautLigne">

                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">format_line_spacing</i>Espacement

                  </a>
                  <a class="mdc-list-item" id="menuSautLigneL">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">border_bottom</i>Séparateur/L
                  </a>
                  <a class="mdc-list-item"id="menuSautLigneC">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">linear_scale</i>Séparateur/C
                  </a>
                  <a class="mdc-list-item" href="#">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">insert_photo</i>Image SVG
                  </a>
                </nav>

                <hr class="mdc-list-divider">

                <nav class="mdc-list">
                  <a class="mdc-list-item" id="menuJson">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">code</i>Json
                  </a>
                  <a class="mdc-list-item" href="#">
                    <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">delete</i>Trash
                  </a>
                </nav>
              </div>
            </nav>

            <div class="demo-content demo-body">
              <!-- TODO: #324 - Should switch to .mdc-toolbar--fixed -->
              <header class=" mdl-layout--fixed-header">
                <div >
                  <section>
                    <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="btn5">
                      <i class="material-icons">more_vert</i>
                    </button>
                    <ul  class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for="btn5">
                      <li class="mdl-menu__item doccSelection" id="CensusLanguage_St">CensusLanguage</li>
                      <li class="mdl-menu__item doccSelection" id="food_drink_St">Food Drink</li>
                      <li class="mdl-menu__item doccSelection" id="graph_St">Map of Canada</li>
                      <li class="mdl-menu__item doccSelection" id="Table_St">Table</li>
                      <li class="mdl-menu__item doccSelection" id="Line chart_St">Line Chart</li>
                    </ul>

                  </section>
                </div>
              </header>

                <section class="containerSaisi" id="saisiTitre">


                    <form class="FormSaisiTitre",action="#" style="display:none">
                      <div class="inputTitre">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                          <input class="mdl-textfield__input" type="text" id="sample1">
                          <label class="mdl-textfield__label" for="sample1" id="labelTitre">Titre</label>
                        </div>
                        <div>
                          <button class="mdl-button mdl-js-button mdl-menu--bottom-right mdl-button--icon" id="addTitle">
                            <i class="material-icons">add</i>
                            <span class="visuallyhidden">Add</span>
                          </button>
                        </div>
                      </div>
                    </form>


                  <form class="FormSaisiEdition",action="#" style="display:none">
                    <div class="inputTitre">
                  <div class="mdl-textfield mdl-js-textfield">
                    <textarea id="textfieldarea" class="mdl-textfield__input" type="text" rows="6" maxrows="10"></textarea>
                    <label id="labelTextfield" class="mdl-textfield__label" for="textfieldarea">Éditer ici</label>
                  </div>
                    </div>
                    <div class="inputText">
                      <div></div>
                    <div>
                      <button class="mdl-button mdl-js-button mdl-menu--bottom-right mdl-button--icon" id="addp">
                        <i class="material-icons">add</i>
                        <span class="visuallyhidden">Add</span>
                      </button>
                    </div>
                    </div>
                  </form>

                </section>

              <script>

                var json1;
                d3.queue()
                  .defer(d3.json, "flare.json")
                  .await(ready);

   var containerSaisie = d3.select("#saisi")
          .append("div")
          .attr("class","container_saisi");

                d3.select("#menuTitre")
                  .on("click",function(){
                    displayMenu("titreAdd");
                  });

                d3.select("#menuEdition")
                  .on("click",function(){
                    displayMenu("editionAdd");
                  });

                d3.select("#menuEdition")
                  .on("click",function(){
                    displayMenu("editionAdd");
                  });

  function displayMenu(a){

  d3.selectAll("#textfieldarea1").remove();
  d3.selectAll("#textfield-titre").remove();
  d3.selectAll("#textfield-sous-titre").remove();

    var displayM = ["none","none","none"]
    switch(a){

      case "titreAdd":
           displayM[0]="block";
        break;
      case "titre":
       //   displayM[0]="block";
        d3.select(".containerSaisi")
          .append("textarea")
          .attr("class","mdl-textfield__input")
          .attr("type","text")
          .attr("rows",1)
          .attr("maxrows",3)
          .attr("id","textfield-titre");

          break;

      case "sous-titre":
        //   displayM[0]="block";
        d3.select(".containerSaisi")
          .append("textarea")
          .attr("class","mdl-textfield__input")
          .attr("type","text")
          .attr("rows",1)
          .attr("maxrows",13)
          .attr("id","textfield-sous-titre");

        break;

      case "edition":
 //       displayM[1]="block";
        d3.select(".containerSaisi")
          .append("textarea")
          .attr("class","mdl-textfield__input")
          .attr("type","text")
          .attr("rows",6)
          .attr("maxrows",10)
          .attr("id","textfieldarea1")
        break;

      case "editionAdd":
        displayM[1]="block";
        break;
    }
  d3.select(".FormSaisiTitre").style("display",displayM[0]);
  d3.select(".FormSaisiEdition").style("display",displayM[1]);

};

  function ready(error, root) {
                  if (error) throw error;

                  var data = root;
                  var docc = [];
                  var objectName = "docc";
                  d3.selectAll(".doccSelection")
                    .on("click",function(){

                      var nomCircle = this.id.substring(0,this.id.length-3);
                      trouverRoute(nomCircle);
                    })

                  var titre;
                  var premierNiveau = root.children;
                  function dataModification(docc){
                    var tab = [],step1 = step1Json();
                    json1 = {"name":"flare","children":step1};

                  };

                  function step1Json(){
                    var objParent,tab=[];
                    var step1 ={};

                    premierNiveau.forEach(function (p) {
                      var step2 = step2Json(p),doccStep1 = [];

                      if(p.name === titre){
                        doccStep1 = docc;
                      }else{
                          doccStep1 = p.docc;
                      }
                      step1 = {"name":p.name,"docc":doccStep1,"children":step2};
                      tab.push(step1)


                    });

                    return tab;
                  }

                  function step2Json(p){
                    var objChild,objParent,tab=[],tab2=[],tab3=[];
                    p.children.forEach(function(q){
                      if(q.name === titre){

                        q.children.forEach(function (p1) {

                          objChild = {"name":p1.name,"size":p1.size,"docc":docc};
                          tab.push(objChild);
                          objParent = {"name":q.name,"children":tab}
                        })
                      }else{
                          var attr = {}
                            if(q.children!==undefined){
                             var obj={};
                                attr = {"name":q.name,"children":q.children}
                            }else{attr = {"name":q.name,"size":q.size}}
                          objParent = attr;}
                      tab2.push(objParent);
                    });
                    return tab2;
                  }

                function trouverRoute(v){

                    //  var premierNiveau = root.children;
                    premierNiveau.forEach(function(d,i){
                      var nom = d.name;
                      if(v === nom){
                        docc = data.children[i].docc;
                        titre = data.children[i].name;

                        data.children[i][objectName] = docc;
                        parcourtDroite(docc);
                        }
                      var deuxiemeNiveau = d.children;
                      deuxiemeNiveau.forEach(function (p1,p2) {
                        var nom = p1.name;

                        if(v === nom){

                          data.children[i].children[p2][objectName] = docc;
                          docc = data.children[i].children[p2].children[0].docc;
                          titre = data.children[i].children[p2].name;
                          parcourtDroite(docc);

                        }
                      })
                    })

                  }

                  var iteration = docc.length,id_s_svg=0;
                function parcourtDroite(v) {
                //    var id_p=0,id_br = 0,id_hr=0,id_s_svg=0,id_h1=0,id_h2=0;
                    d3.selectAll(".text_droite, .text_gauche, .saut_ligne, .svg_separateur, h1, h2").remove();
                    var droite = d3.select("#countainerDroitEdition");
                    v.forEach(function (p1,p2) {

                      var objName = Object.keys(p1)[0];
                      switch (objName){
                        case "p":
                          var idSelect="",idButton;
                        var container =  droite.append("div")
                            .attr("id",function(){return "p"+p2;})
                            .attr("class","text_droite")
                            .attr("width",840)
                            .attr("pointer-events", "none")
                            .style("padding-left","20px")
                            .style("padding-right","20px")
                            .on("mouseover",function(d){
                               idSelect = "#"+this.id;
                               idButton="#tempButtunp"+idSelect.substring(2,3);
                              showElement(this,"20px",idButton);
                            })
                            .on("mouseout",function(){hiddenElement(this,idButton)})
                            .on("click",function (d) {
                              displayMenu("edition");
                              if(docc.length!==0){
                              d3.select("#textfieldarea1")
                                .data([docc[p2].p])
                                .text(docc[p2].p)
                                .on("input",function (d) {
                                  var value;
                                  value = this.value
                                  docc[p2] = {"p": value};
                                  //id_p=0;
                                  parcourtDroite(docc);

                                })
                              ;}
                            })
                            .on("dblclick",function (d) {
                              var doccTemp = [];
                              docc.map(function(q1,q2){
                                if(q2!==p2){
                                  return doccTemp.push(q1);
                                }
                              });
                              docc = doccTemp;

                              d3.select(this).remove();
                              parcourtDroite(docc);
                            });
                         var p = container.append("div").append("p")
                            .text(p1[objName]);
                          Xbutton(container,"p",p2);
                          break;
                        case "SautLigne":

                          if(p1[objName]==="br") {
                              var idButton = "";
                            var container = droite.append("div")
                              .attr("id",function(){return "br"+p2;})
                              .style("padding","20px")
                              .attr("class", "saut_ligne br")
                              .on("mouseover",function(){
                                  var idbr = this.id;
                                idButton="#tempButtunbr"+idbr.substring(2,3);

                                showElement(this,"5px",idButton);
                              })
                              .on("mouseout",function (){hiddenElement(this,idButton)})
                              .on("dblclick", function () {
                                d3.select(this).remove();
                                var doccTemp = [];
                                docc.map(function(q1,q2){
                                  if(q2!==p2){
                                    return doccTemp.push(q1);
                                  }
                                });
                                docc = doccTemp;
                                parcourtDroite(docc);
                              })
                              .append("div")
                      //        var br =container.append("sgv").append("rect").style("width",700).style("height",700)
                            Xbutton(container,"br",p2);

                          }else if(p1[objName]==="hr"){

                            var container = droite.append("div")
                              .attr("id",function(){return "hr"+p2;})
                              .attr("class", "saut_ligne")
                              .style("padding","20px")
                              .on("mouseover",function(){
                                var idbr = this.id;
                                idButton="#tempButtunhr"+idbr.substring(2,3);
                                showElement(this,"5px",idButton);
                              })
                              .on("mouseout",function (){hiddenElement(this,idButton)})
                            var hr = container.append("div")
                              .append(p1[objName])
                              .on("click", function () {
                                d3.select(this).remove();
                                var doccTemp = [];
                                docc.map(function(q1,q2){
                                  if(q2!==p2){
                                    return doccTemp.push(q1);
                                  }
                                });
                                docc = doccTemp;
                                parcourtDroite(docc);
                              })
                            Xbutton(container,"hr",p2);
                          }else{
                            var idButton="";
                            var container = droite.append("div")
                              .attr("id",function(){return "Ssvg"+p2;})
                              .attr("class", "saut_ligne")
                              .style("padding","20px")
                              .on("mouseover",function(){
                                var idSSvg = this.id;
                                idButton="#tempButtunSsvg"+idSSvg.substring(4,5);
                                showElement(this,"5px",idButton);
                              })
                              .on("mouseout",function (){hiddenElement(this,idButton)});

                            var svg = container
                              .append("svg")
                              .attr("id",p1[objName])
                              .attr("width", 840)
                              .attr("height", 30)
                              .attr("class","svg_separateur")
                              .style("padding","20px")
                              .on("click", function () {
                                d3.select(this).remove();
                                var doccTemp = [];
                                docc.map(function(q1,q2){
                                  if(q2!==p2){
                                    return doccTemp.push(q1);
                                  }
                                });
                                docc = doccTemp;
                                parcourtDroite(docc);
                              });
                            svg.append("circle")
                              .attr("cx",350)
                              .attr("cy",20)
                              .attr("r", 10)
                              .style("fill","rgb(225,225,225)")
                            svg.append("circle")
                              .attr("cx",380)
                              .attr("cy",20)
                              .attr("r", 10)
                              .style("fill","rgb(225,225,225)")
                            svg.append("circle")
                              .attr("cx",410)
                              .attr("cy",20)
                              .attr("r", 10)
                              .style("fill","rgb(225,225,225)")
                            Xbutton(container,"Ssvg",p2);
                          }

                          break;
                        case "h1":

                          var idButton="";
                          var container = droite.append("div")
                            .attr("id",function(){return "h1"+p2;})
                            .attr("class", "saut_ligne h1")
                            .style("padding","20px")
                            .on("mouseover",function(){
                              var idh1 = this.id;
                              idButton="#tempButtunh1"+idh1.substring(2,3);
                              showElement(this,"5px",idButton);
                            })
                            .on("mouseout",function (){hiddenElement(this,idButton)});
                          var h1 = container.append("h1")
                            .style("text-align","center")
                            .text(docc[p2].h1)
                            .on("click",function (d) {
                              displayMenu("titre");
                              var textEditer = docc[p2].h1;

                              d3.select("#textfield-titre")
                                .data([docc[p2].h1])
                                .text(textEditer)
                                .on("input",function (d) {
                                  var value;
                                  value = this.value

                                  docc[p2] = {"h1":value};

                                  parcourtDroite(docc);
                                })
                            })
                            .on("dblclick",function(){
                              var doccTemp = [];
                              docc.map(function(q1,q2){
                                if(q2!==p2){
                                  return doccTemp.push(q1);
                                }
                              });
                              docc = doccTemp;
                              d3.select(this).remove();
                              parcourtDroite(docc);

                            })
                          ;
                          Xbutton(container,"h1",p2);
                          break;

                        case "h2":
                          var idButton="";
                          var container = droite.append("div")
                            .attr("id",function(){return "h2"+p2;})
                            .attr("class", "saut_ligne h2")
                            .style("padding","10px")
                            .on("mouseover",function(){
                              var idh2 = this.id;
                              idButton="#tempButtunh2"+idh2.substring(2,3);

                              showElement(this,"5px",idButton);
                            })
                            .on("mouseout",function (){hiddenElement(this,idButton)});
                          container.append("h2")
                            .text(p1.h2)
                            .on("click",function (d) {
                              displayMenu("sous-titre");
                              d3.select("#textfield-sous-titre")
                                .data([docc[p2].h2])
                                .text(docc[p2].h2)
                                .on("input",function (d) {
                                  var value;
                                  value = this.value
                                  docc[p2] = {"h2":value};
                                  parcourtDroite(docc);
                                });

                            });
                          Xbutton(container,"h2",p2);

                          break;

                        case "svg":


                          break;
                      }
                    })
                  }

                  function  showElement(element,v,idButton){

                  d3.select(element)
                    .style("box-shadow","0 2px 2px 0 rgba(0, 0, 0, 0.24)")
             //

                  d3.select(idButton)
                    .style("visibility","visible")
                };

                  function  hiddenElement(element,idButton){

                    d3.select(element)
                      .style("box-shadow",null)

                    d3.select(idButton)
                      .style("visibility","hidden")
                  }

                  function Xbutton (container,element,p2){

                    var idButton = "tempButtun"+element+p2;

                    var butX = container.append("div").append("button")
                      .attr("id",function(){return idButton;})
                      .attr("class","mdl-button mdl-js-button mdl-menu--bottom-right mdl-button--icon"+" "+element)
                      .style("float","right")
                      .style("visibility","hidden")
                      .on("click",function(){
                          var docctemp=[];
                          docc.map(function(d,i){
                              if(i!==p2){
                                  docctemp.push(d);
                              }
                          })
                        docc = docctemp;
                        d3.select("#"+element+p2).remove();
                        if(element==="p"){ d3.selectAll("#textfieldarea1").remove();}
                        if(element==="h1"){d3.selectAll("#textfield-titre").remove();} ;
                        if(element==="h2"){d3.selectAll("#textfield-sous-titre").remove();}
                      })
                      .append("i")
                      .attr("class","material-icons clear")
                      .text("clear");
                  }

                  d3.select("#addp")
                    .on("click",function(){
                        var text={};
                      var para = {"p":d3.select("#textfieldarea").node().value};
                       text=para;
                        docc.push(text);
                        parcourtDroite(docc);
                        d3.select("#textfieldarea").node().value="";
                    });



    d3.select("#addTitle")
      .on("click",function(){
        var text={};
        var titre = {"h2":d3.select("#sample1").node().value};
          text=titre;
          docc.push(text);
          console.log(docc);
          parcourtDroite(docc);
          d3.select("#sample1").node().value="";
      });


                  d3.select("#menuSautLigne")
                    .on("click",function(){
                        var sautLigne = {"SautLigne":"br"}
                      docc.push(sautLigne);
                      parcourtDroite(docc);
                    });

                  d3.select("#menuSautLigneC")
                    .on("click",function(){
                      id_s_svg++;
                      var id= "svgSeparateur"+iteration;
                      var sautLigne = {"SautLigne":id}
                      docc.push(sautLigne);
                      parcourtDroite(docc);
                      iteration++;
                    });

                  d3.select("#menuSautLigneL")
                    .on("click",function(){
                      var id= "svgSeparateur"+iteration;
                      var sautLigne = {"SautLigne":"hr"}
                      docc.push(sautLigne);
                      parcourtDroite(docc);
                      iteration++;
                    });

                  d3.select("#menuJson")
                    .on("click",function(){
                      dataModification(docc);
                      treeData = JSON.parse( JSON.stringify(json1) );
                      var url = 'data:text/json;charset=utf8,' + encodeURIComponent( JSON.stringify(treeData));
                      window.open(url, '_blank');
                      window.focus();
                    });

                };

              </script>

            </div>

          </div>
        </section>

        <section class="mdl-grid mdl-shadow--2dp sectionDroite">
          <div class="mdl-cell mdl-cell--12-col-desktop" id="coteDroiteEdition">
            <div class="scroll">
              <div id="countainerDroitEdition"></div>
            </div>
          </div>
        </section>
      </section>
    </div>


    <footer class="mdl-mega-footer">
      <div class="mdl-mega-footer--middle-section">
        <div class="mdl-mega-footer--drop-down-section">
          <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
          <h1 class="mdl-mega-footer--heading">Features</h1>
          <ul class="mdl-mega-footer--link-list">
            <li><a href="#">About</a></li>
            <li><a href="#">Terms</a></li>
            <li><a href="#">Partners</a></li>
            <li><a href="#">Updates</a></li>
          </ul>
        </div>
        <div class="mdl-mega-footer--drop-down-section">
          <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
          <h1 class="mdl-mega-footer--heading">Details</h1>
          <ul class="mdl-mega-footer--link-list">
            <li><a href="#">Spec</a></li>
            <li><a href="#">Tools</a></li>
            <li><a href="#">Resources</a></li>
          </ul>
        </div>
        <div class="mdl-mega-footer--drop-down-section">
          <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
          <h1 class="mdl-mega-footer--heading">Technology</h1>
          <ul class="mdl-mega-footer--link-list">
            <li><a href="#">How it works</a></li>
            <li><a href="#">Patterns</a></li>
            <li><a href="#">Usage</a></li>
            <li><a href="#">Products</a></li>
            <li><a href="#">Contracts</a></li>
          </ul>
        </div>
        <div class="mdl-mega-footer--drop-down-section">
          <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
          <h1 class="mdl-mega-footer--heading">FAQ</h1>
          <ul class="mdl-mega-footer--link-list">
            <li><a href="#">Questions</a></li>
            <li><a href="#">Answers</a></li>
            <li><a href="#">Contact us</a></li>
          </ul>
        </div>
      </div>
      <div class="mdl-mega-footer--bottom-section">
        <div class="mdl-logo">
          More Information
        </div>
        <ul class="mdl-mega-footer--link-list">
          <li><a href="https://developers.google.com/web/starter-kit/">Web Starter Kit</a></li>
          <li><a href="#">Help</a></li>
          <li><a href="#">Privacy and Terms</a></li>
        </ul>
      </div>
    </footer>
  </main>
</div>


<!-- build:js(app/) ../../scripts/main.min.js -->
<script src="./scripts/d3/d3.js"></script>
<script src="./scripts/d3/topojson.v1.min.js"></script>
<script src="./scripts/components/pie/donutChart.js"></script>
<script src="./scripts/components/voronoi/voronoi.js"></script>
<script src="./scripts/components/voronoi/Voronoi_scatterplot.js"></script>
<script src="./scripts/components/voronoi/multi-line_voronoi.js"></script>
<script src="./scripts/components/pie/simplePie.js"></script>

<script src="./scripts/components/food_drink/table.js"></script>
<!--<script src="./scripts/components/pie/Bilevel Partition.js"></script>-->
<script src="./scripts/components/food_drink/line.js"></script>
<script src="./scripts/components/census/d3-canada-map.js"></script>
<script src="./scripts/components/census/sgc.js"></script>
<script src="./styles/src/mdlComponentHandler.js"></script>
<script src="./styles/src/button/button.js"></script>
<script src="./styles/src/checkbox/checkbox.js"></script>
<script src="./styles/src/icon-toggle/icon-toggle.js"></script>
<script src="./styles/src/menu/menu.js"></script>
<script src="./styles/src/progress/progress.js"></script>
<script src="./styles/src/radio/radio.js"></script>
<script src="./styles/src/slider/slider.js"></script>
<script src="./styles/src/spinner/spinner.js"></script>
<script src="./styles/src/switch/switch.js"></script>
<script src="./styles/src/tabs/tabs.js"></script>
<script src="./styles/src/textfield/textfield.js"></script>
<script src="./styles/src/tooltip/tooltip.js"></script>
<script src="./styles/src/layout/layout.js"></script>
<script src="./styles/src/data-table/data-table.js"></script>
<script src="./styles/src/ripple/ripple.js"></script>
<script src="scripts/main.js"></script>
<!-- endbuild -->


<script>
  d3.select("#feature")
    .on("click",function(){
      d3.selectAll("#zoomableCircle")
        .remove();
      firstPage();

    })
//  d3.select("#edition_button")
//    .on("click",function(){
//      d3.selectAll("#coteDroite_edition > div.text_gauche")
//        .remove();
//
//
//    })


</script>
<script>


function firstPage(){
  var doccCont =  d3.select(".scroll").append("div").attr("id","zoomableCircle").attr("class","docc");
  var docc = doccCont.append("div")
      .attr("class","text_droite_catalogue"),
    text_docc = docc
      .append("p")
      .text("Bonjour,")
      .append("p")
      .text(" Vous voici dans l’application de la doccumentation de l’équipe de visualisation de statistique Canada. Dans cette application vous verrez les visualisations ainsi que la doccumentation des différents projets que l’équipe de visualistion on développé au cours des derniers mois. De plus, des exemples de visualisations sont montré et doccumenter affin de pouvoir les utilisés dans de futur projets. Les projets réalisés sont regroupé et expliquer dans une premier niveau. Chaque visualisation ont leurs propre doccumentation. Vous n’avez qu’à cliquer sur celci.")
      .append("br");
  var ligne = docc
      .append("hr")
      .attr("class","separator_line"),
    sautLine = docc
      .append("br"),
    titre_Zoomable = docc
      .append("div")
      .attr("class","headerDocc")
      .attr("height",400),
    titre_header = titre_Zoomable
      .append("h1")
      .attr("class","title_visualisation")
      .style("margin-right","100px")
      .text("Zoomable Circle Packing"),
    table_header = titre_Zoomable
      .append("svg")
      .attr("height",260),
  rectCaracteristique = table_header
      .append("rect")
      .attr("width",120)
      .attr("height",250)
      .attr("stroke","rgb(225,225,225)")
      .attr("fill","none"),

  rectTitre = table_header
    .append("rect")
    .attr("width",120)
    .attr("height",50)
    .style("fill","rgb(132,132,132)"),


    rectLigne1 = table_header
      .append("rect")
      .attr("width",120)
      .attr("height",50)
      .style("stroke","rgb(225,225,225)")
      .attr("fill","none")
      .attr("transform",
        "translate(" +0 + "," + 50 + ")"),

rectLigne1Icone = table_header
  .append("text")
  .attr("class","material-icons")
  .text("timeline"),

      rectLigne1IconeLabel = rectLigne1Icone
        .attr("transform",
          "translate(" + 10 + "," + 87 + ") scale(1.2)")
        .attr("fill", "rgb(132,132,132)"),

      rectLigne1Text = table_header
        .append("text")
        .attr("class","")
        .text("12J"),

      rectLigne1IconeLabel = rectLigne1Text
        .attr("transform",
          "translate(" + 60 + "," + 80 + ")")
        .attr("fill", "rgb(132,132,132)")
        .attr("font-family", "sans-serif")
        .attr("font-size", "16px"),


  rectLigne2 = table_header
      .append("rect")
      .attr("width",120)
      .attr("height",50)
      .style("stroke","rgb(225,225,225)")
      .attr("fill","none")
      .attr("transform",
        "translate(" +0 + "," + 100 + ")"),

      rectLigne2Icone = table_header
        .append("text")
        .attr("class","material-icons")
        .text("build"),

      rectLigne2IconeLabel = rectLigne2Icone
        .attr("transform",
          "translate(" + 10 + "," + 137 + ") scale(1.2)")
        .attr("fill", "rgb(132,132,132)"),

      rectLigne2Text = table_header
        .append("text")
        .attr("class","")
        .text("non"),

      rectLigne2IconeLabel = rectLigne2Text
        .attr("transform",
          "translate(" + 60 + "," + 130 + ")")
        .attr("fill", "rgb(132,132,132)")
        .attr("font-family", "sans-serif")
        .attr("font-size", "16px"),



    rectLigne3 = table_header
      .append("rect")
      .attr("width",120)
      .attr("height",50)
      .style("stroke","rgb(225,225,225)")
      .attr("fill","none")
      .attr("transform",
        "translate(" +0 + "," + 150 + ")"),

      rectLigne3Icone = table_header
        .append("text")
        .attr("class","material-icons")
        .text("warning"),

      rectLigne3IconeLabel = rectLigne3Icone
        .attr("transform",
          "translate(" + 10 + "," + 187 + ") scale(1.2)")
        .attr("fill", "rgb(132,132,132)"),

      rectLigne3Text = table_header
        .append("circle")
        .attr("class","")
        .attr("cx",54)
        .attr("cy",-12)
        .attr("r",7)
        .attr("fill","rgb(255,255,102)")
        .attr("transform",
          "translate(" + 10 + "," + 187 + ") scale(1.2)")

  rectLigne4Icone = table_header
    .append("text")
    .attr("class","material-icons")
    .text("assignment_turned_in"),

    rectLigne4IconeLabel = rectLigne4Icone
      .attr("transform",
        "translate(" + 10 + "," + 237 + ") scale(1.2)")
      .attr("fill", "rgb(132,132,132)"),

    rectLigne4Text = table_header
      .append("text")
      .attr("class","")
      .text("non"),

    rectLigne4IconeLabel = rectLigne4Text
      .attr("transform",
        "translate(" + 60 + "," + 230 + ")")
      .attr("fill", "rgb(132,132,132)")
      .attr("font-family", "sans-serif")
      .attr("font-size", "16px"),

      Zoomable_Circle_docc = doccCont
      .append("div")
      .attr("class","text_droite_catalogue"),
    premierPara = Zoomable_Circle_docc
      .append("p")
      .text("Cette platform nous permet de rassembler des éléments que ce soit des projets faits dans le passé ou des éléments que nous voulons expérimenter. Les éléments mis dans les cercles doivent être obligatoirement “scalable”. C’est pourquoi les visualisation se prête bien à cette platforme, étant donné que nous travaillont avec des éléments vectoriel. Parcontre certains éléments ont été modifier pour entrer dans les cercles. En effet les tables utilisées dans food drink ont été remplacées par des éléments rect étant donné que les tables ne sont pas scalable.")
  separateurCircle = doccCont
    .append("svg")
    .attr("width",800)
    .attr("height",30)
  circle1 = separateurCircle
    .append("circle")
    .attr("cx",350)
    .attr("cy",20)
    .attr("r",10)
    .attr("fill","rgb(225,225,225)")
  circle2 = separateurCircle
    .append("circle")
    .attr("cx",380)
    .attr("cy",20)
    .attr("r",10)
    .attr("fill","rgb(225,225,225)")
  circle3 = separateurCircle
    .append("circle")
    .attr("cx",410)
    .attr("cy",20)
    .attr("r",10)
    .attr("fill","rgb(225,225,225)")
  deuxiemePar = doccCont
    .append("div")
    .attr("class","text_droite_catalogue"),
    text_ParagUn = deuxiemePar
      .append("p")
      .text("Cette visualisation est relativement simple. Chaque cercle est un élément du fichier flare.json. Ceux-ci ont un nom et une dimention. Si un cercle englobe d’autre cercle alors la dimention du cercle parent est l’addition des dimentions des cercles enfents + les marges que nous affectont pour les objects."),
    saut_ligne1 = text_ParagUn
      .append("br"),
    saut_ligne2 = text_ParagUn
      .append("br"),
    text_Paragdeux = deuxiemePar
      .append("p")
      .text("Pour y inséré une visualisation, vous devez la mettre dans le dossier js/components. Comme vous le remarquerai, ils sont classé par projet. Donc, la map du Canada est dans js/components/food_drink/canadaMap.js. Par la suite vous devez choisir un cercle pour y insérer votre élément. Quand vous avez choisi le cercle vous cliquer pour ogmenter la taille. Quand la taille est au maximum vous n’avez qu’à centre votre visualisation dans le cercle. Par la suite entré le code si bas dans le switch de la function zoomTo(). ")
  ref_zoomCicle_container = doccCont
    .append("div")
    .attr("class","ref"),
    text_ref = ref_zoomCicle_container
      .append("p")
      .text("Référence : Mike Bostock’s, ")
      .append("a")
      .attr("href","https://bl.ocks.org/mbostock/7607535")
      .style("color","rgb(191,191,191")
      .text("https://bl.ocks.org/mbostock/7607535")

}






  var svg = d3.select("#coteDroitCercles")
      .attr("width",800)
      .attr("height",800)
      ,
    margin = 20,
    diameter = +svg.attr("width"),
    g = svg.append("g").attr("transform", "translate(" + diameter / 2 + "," + diameter / 2 + ")").attr("class","platformCircle"),
    width = +svg.attr("width"),
    height = +svg.attr("height")
  ;

  var iconeSvg = d3.select("#sectionGauche").append("div").append("button")
    .attr("id","sizeSVG")
    .attr("class","mdl-button mdl-js-button mdl-menu--bottom-right mdl-button--icon zoom-button")
    .style("float","right")
    .on("click",function() {

        if(d3.select(this).text()=== "zoom_in"){
          d3.select("#coteDroitCercles")
            .style("width","1575px")
            .style("height","1575px")
            .attr("transform","translate(775,775),scale(2)");

          d3.select("#zoom_button")
            .text("zoom_out");
        }else{

          d3.select("#coteDroitCercles")
            .style("width","800px")
            .style("height","800px")
            .attr("transform","translate(0,0),scale(1)");

          d3.select("#zoom_button")
            .text("zoom_in");
        }

    })
    .append("i")
    .attr("id","zoom_button")
    .attr("class","material-icons")
    .attr("role","presentation")
    .text("zoom_in");


  //d3.axisBottom(xRange).tickFormat(function(d){ return d.x;});


  var donut = donutChart()
    .width(960)
    .height(500)
    .cornerRadius(3) // sets how rounded the corners are on each slice
    .padAngle(0.015) // effectively dictates the gap between slices
    .variable('Probability')
    .category('Species');
//donutTransition();
// voronoi();
//voronoi_scatterplot();
var testvor;

simplePie();
  d3.tsv('species.tsv', function(error, data) {
    if (error) throw error;
    d3.select('#coteDroitCercles')
      .datum(data) // bind data to the div
      .call(donut); // draw chart in div
  });

  var color = d3.scaleLinear()
    .domain([-1, 5])
    .range(["hsl(0,100%,100%)", "hsl(0,0%,30%)"])
    .interpolate(d3.interpolateHcl);
  var pack = d3.pack()
    .size([diameter - margin, diameter - margin])
    .padding(2);

  // parse the date / time
  var parseTime = d3.timeParse("%d-%b-%y");

  // set the ranges
  var x = d3.scaleTime().range([0, 700]);
  var y = d3.scaleLinear().range([250, 0]);
  var xAxis = d3.axisBottom(x);
  var yAxis = d3.axisLeft(y);
  // define the 1st line
  var valueline = d3.line()
    .x(function (d) {
      return x(d.date);
    })
    .y(function (d) {
      return y(d.close);
    });

  // define the 2nd line
  var valueline2 = d3.line()
    .x(function (d) {
      return x(d.date);
    })
    .y(function (d) {
      return y(d.open);
    });
  d3.selectAll(".docc").style("visibility","hidden");
  d3.selectAll("#zoomableCircle").style("visibility","visible");



  d3.queue()
    .defer(d3.json, "flare.json")
    .defer(d3.json,"canada.json")
    .defer(d3.json,"dataLine.json")
    .await(ready2);


  function ready2(error, root,canada,dataChartLine) {
    if (error) throw error;
    dataChartLine.forEach(function(d) {
      var prov = Object.keys(d)[0];
      d[prov].forEach(function (p1) {
        p1.date = parseTime(p1.date);
      })
    });

    //   bilevelPartition(root,g);
    var canadaData = dataChartLine[0],

      table = svg.append("g").attr("class","table"),
      sett = function (name,v) {

        var date = function () {
          var tableDate = [];
          v.forEach(function(d){
            var date = {};
// https://github.com/d3/d3-time-format
            date = d.date;
            var formatTime = d3.timeFormat("%B %d, %Y");
            date = formatTime(date);
            return tableDate.push(date);
          });
          return tableDate;
        };

        var valeur = function(){
          var tableValue = [];
          v.forEach(function(d){
            var date = d.date;
            var formatTime = d3.timeFormat("%B %d, %Y");
            date = formatTime(date);
            var data = {
              date:date,
              close:d.close,
              open:d.open
            };
            return tableValue.push(data);
          });

          return tableValue;
        };

        return {
          titre:name,
          date:date(),
          valeur:valeur()
        }
      };

    getTable(table,sett("Canada",canadaData.canada),dataChartLine);


    var root = d3.hierarchy(root)
      .sum(function (d) {
        return d.size;
      })
      .sort(function (a, b) {
        return b.value - a.value;
      });


    mapX=500,mapY=500
    var canadaMap = svg.append("g");

    var canadaChartLine1 = svg
      .append("g")
      .attr("id","canadaChartLine");



    getLineChart(canadaData.canada);

    var focus = root,
      nodes = pack(root).descendants(),
      view;

    var tran = nodes;
    //  getCodeQueue(svg, tran, nodes[2].children[1].children[0].x, nodes[2].children[1].children[0].y);

    for (var p = 0; p < canada.objects.PR2016CBF.geometries.length; p++) {
      geoProp = canada.objects.PR2016CBF.geometries[p].properties;
      geoProp.PRCODE = sgc.province.getCodeFromSGC(geoProp.PRUID);
    }

    getCanadaMap(canadaMap, {
      baseMap: canada,
    },mapX,mapY);
    //       var peopleTable = tabulate(sett("Canada",canadaData.canada).valeur, ["close", "open"]);

    var circle = g.selectAll("circle")
      .data(nodes)
      .enter().append("circle")
      .attr("class", function (d) {
        return d.parent ? d.children ? "node" : "node node--leaf" : "node node--root";
      })
      .style("fill", function (d) {
        return d.children ? color(d.depth) : null;
      })
      .on("click", function (d) {
        d3.select("#selection").remove();
        d3.selectAll(".docc").remove();
        console.log(d.data.name)
        var docc = d.children[0].data.docc,
            titre = "";
        if(docc!== undefined){
         titre = d.children[0].data.name;
          affficheDocc(docc,titre);
        }else{
            if(d.data.docc !== undefined) {
              docc = d.data.docc;
              titre = d.data.name;
              affficheDocc(docc, titre);
            }

        }


        tran = d;


        if (focus !== d){zoom(d);d3.selectAll(".docc").remove(); d3.event.stopPropagation();}

      });

    function affficheDocc(v,titre) {

      var countainer = d3.select("#countainerDroit");
      var droite = countainer.append("div")
        .attr("id","selection");

      v.forEach(function (p1,p2) {
        var objName = Object.keys(p1)[0];

        switch (objName){
          case "p":
            droite.append("div")
              .attr("class","text_droite")
              .attr("width",840)
              .append("p")
              .text(p1[objName]);
            break;
          case "SautLigne":

            if(p1[objName]==="br") {
              droite.append("div")
                .attr("class", "saut_ligne")
                .append(p1[objName].br)
            }else if(p1[objName]==="hr"){
              droite.append("div")
                .attr("class", "saut_ligne")
                .append("hr");

            }else{
              var svg = droite
                .append("svg")
                .attr("id",p1[objName])
                .attr("width", 840)
                .attr("height", 30)
                .attr("class","svg_separateur")
              svg.append("circle")
                .attr("cx",350)
                .attr("cy",20)
                .attr("r", 10)
                .style("fill","rgb(225,225,225)")
              svg.append("circle")
                .attr("cx",380)
                .attr("cy",20)
                .attr("r", 10)
                .style("fill","rgb(225,225,225)")
              svg.append("circle")
                .attr("cx",410)
                .attr("cy",20)
                .attr("r", 10)
                .style("fill","rgb(225,225,225)")
            }
            break;
          case "h1":
            droite.append("h1")
              .text(p1.h1)
            break;

          case "h2":
            droite.append("h2")
              .text(p1.h2)
            ;
            break;
          case "checkbox":
              console.log("checkbox_ici")
                var labeltest = d3.select(".scroll").append("label").attr("id","form").attr("for","show-voronoi").text("Show Voronoi");
                 testvor = labeltest
            .append("input").attr("type","checkbox").attr("id","show-voronoi");
            ;


            break;
          case "svg":

            break;
        }
      })
    }
    var chart_multi = multiline_chart_voronoi(testvor);
    var text = g.selectAll(".label")
      .data(nodes)
      .enter().append("text")
      .attr("class", "label")
      .style("fill-opacity", function (d) {
        return d.parent === root ? 1 : 0;
      })
      .style("display", function (d) {
        return d.parent === root ? "inline" : "none";
      })
      .text(function (d) {
        return d.data.name;
      });

    var node = g.selectAll("circle,.label,.code,.canada-map");

    svg
      .style("background", color(-1))
      .on("click", function (d) {
        d3.select(".docc").remove();
        d3.select("#selection").remove();
        firstPage();
        d3.select("#zoomableCircle").style("visibility","visible")
        zoom(root);
      });

    zoomTo([root.x, root.y, root.r * 2 + margin],.2);

    function zoom(d) {
      var focus0 = focus;
      focus = d;
      var ident = d.children[0].data.name;
      var token = 150.3755879262101
      var transition = d3.transition()
        .duration(d3.event.altKey ? 7500 : 750)
        .tween("zoom", function (d) {
          var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2 + margin]);
          return function (t) {
            zoomTo(i(t),token/i(t)[2],t);
          };
        });
      transition.selectAll(".label")
        .filter(function (d) {
          return d.parent === focus || this.style.display === "inline";
        })
        .style("fill-opacity", function (d) {
          return d.parent === focus ? 1 : 0;
        })
        .on("start", function (d) {
          if (d.parent === focus) this.style.display = "none";
        })
        .on("end", function (d) {
          if (d.parent !== focus) this.style.display = "none";
        });
    }


    function zoomTo(v,t,u) {
      var k = diameter / v[2];
      view = v;
      node.attr("transform", function (d) {

        var identif = d.data.name;
        var oneTime = 0;
        var data = d;
        switch(identif) {


          case "Carte du Canada":

            d3.select(".canada-map")
              .attr("transform", function (e) {
                var sumTranX = ((data.x - v[0]) * k + 400);
                var sumTranY = ((data.y - v[1]) * k + 400);

                return "translate(" + sumTranX + "," + sumTranY + "),scale(" + t + ") "
              });
            break;

          case "canadaChartLine":
            d3.select("#canadaChartLine")
              .attr("transform", function (e) {

                var sumTranX = (data.x - v[0]) * k + 400;
                var sumTranY = (data.y - v[1]) * k + 400;
                return "translate(" + sumTranX + "," + sumTranY + "),scale(" + t *.7  + ") "
              });
            break;

          case "CanadaTable":
            d3.select(".table")
              .attr("transform", function (e) {
               var sumTranX = ((data.x - v[0]) * k + 400)*1.0075,
                   sumTranY = ((data.y - v[1]) * k + 400)*1.01;
                return "translate(" + sumTranX + "," + sumTranY + "),scale(" + t*.6+ ")"
              });
            break;

          case "Data":
            d3.select("#donutCircle1")
              .attr("transform", function (e) {
                var sumTranX = ((data.x - v[0]) * k + 400);
                var sumTranY = ((data.y - v[1]) * k + 400);
                return "translate(" + sumTranX + "," + sumTranY + "),scale(" + t *0.3+ ")"
              });
            break;

          case "voronoi_vitreaux":
            d3.select(".vonrooi_vitreaux")
              .attr("transform", function (e) {
                var sumTranX = ((data.x - v[0]) * k + 400);
                var sumTranY = ((data.y - v[1]) * k + 400);
                return "translate(" + sumTranX+ "," + sumTranY+ "),scale(" + t *0.25+ ")"
              });
            break;
          case "render":
            d3.select(".simplePie")
              .attr("transform", function (e) {
                var sumTranX = ((data.x - v[0]) * k + 400);
                var sumTranY = ((data.y - v[1]) * k + 400);
                return "translate(" + sumTranX+ "," + sumTranY+ "),scale(" + t *0.25+ ")"
              });
            break;
          case "voronoi_chart_multiline":
            d3.select(".chart_line_voronoi")
              .attr("transform", function (e) {
                var sumTranX = ((data.x - v[0]) * k + 400);
                var sumTranY = ((data.y - v[1]) * k + 400);
                return "translate(" + sumTranX+ "," + sumTranY+ "),scale(" + t *0.25+ ")"
              });
            break;
        }





        return "translate(" + (d.x - v[0]) * k + "," + (d.y - v[1]) * k + ")";
      });
      circle.attr("r", function (d) {
        return d.r * k;
      });
    }

    d3.selectAll(".provinces")
      .on("mouseover",function (d) {
        d3.select(this).attr("fill","rgb(191,191,191")
        var provSelec = d.properties.PRFNAME;

        updateData(provSelec);
        tabulate(provSelec);

      })
      .on("mouseout", function (d) {

        d3.select(this).attr("fill", "rgb(132,132,132)")
        updateData("canada");tabulate("canada");

      })


// http://bl.ocks.org/d3noob/6bd13f974d6516f3e491
    function updateData(v) {

      var lineData= {};
      dataChartLine.forEach(function(d){
        var prov = Object.keys(d)[0];


        if(prov===v){
          lineData = d[prov]
          lineData.forEach(function(d) {
            d.close = +d.close;
            d.open = +d.open;
          });

          // Scale the range of the data
          //  sett(prov,lineData)

          x.domain(d3.extent(lineData, function(d) {return d.date; }));
          y.domain([0, d3.max(lineData, function(d) {
            return Math.max(d.close, d.open); })]);

          xAxis = d3.axisBottom(x);
          yAxis = d3.axisLeft(y);


          var transition = d3.transition()
            .duration(2000)
            ;

          transition.selectAll(".line.close");
          // Select the section we want to apply our changes to
          var chart = d3.select("#canadaChartLine")
            //.transition().ease(d3.easeSin) ;

          // Make the changes
          transition.selectAll(".line.close")
          //  .duration(750)

            .attr("d", valueline(lineData));
          transition.selectAll(".line.open")   // change the line
          //  .duration(750)

            .attr("d", valueline2(lineData));
          chart.select(".xAxis") // change the x axis
          //  .duration(10)
            .call(xAxis);
          chart.select(".yAxis") // change the y axis
           // .duration(10)
            .call(yAxis);

        }
      })
    }


    function tabulate(v) {

      // var selectionSett = sett(prov,canadaData.prov);
      var tableValue =[];
      var lineData= {};
      dataChartLine.forEach(function(d) {
        var prov = Object.keys(d)[0];


        if (prov === v) {

          lineData = d[prov]
          lineData.forEach(function (d) {
            var date = d.date;
            var formatTime = d3.timeFormat("%B %d, %Y");
            date = formatTime(date);
            var data = {
              date:date,
              close:d.close,
              open:d.open
            };
            return tableValue.push(data);
          });
        }
      })
      var provSel = "Canada";
      if(v === "Québec" || v === "Ontario" || v === "Nunavut"){
        provSel = v;
      }
      d3.select(".titleText").text([provSel])

      var  noText = 1;
      tableValue.forEach(function (p1) {

        var data = [p1.date];
        d3.select(".dataRecText.textNo"+noText).data(data).text([p1.date]);
        noText++;
        d3.select(".dataRecText.textNo"+noText).data(data).text([p1.open]);
        noText++;
        d3.select(".dataRecText.textNo"+noText).data(data).text([p1.close]);
        noText++;
      });


    }
// render the table

    ;

  }
</script>
<!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-XXXXX-X', 'auto');
  ga('send', 'pageview');
</script>
<!-- Built with love using Web Starter Kit -->
</body>
</html>
